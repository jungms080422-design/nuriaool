LifeStats-Simulator/
â”‚
â”œâ”€â”€ app.py
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ README.md
â””â”€â”€ data/
    â”œâ”€â”€ suicide_rate.csv
    â”œâ”€â”€ depression.csv
    â”œâ”€â”€ smoking_rate.csv
    â””â”€â”€ social_risk_exposure.csv

# LifeStats: ì²­ì†Œë…„ ìƒëª…ì¡´ì¤‘ ì‹œë®¬ë ˆì´í„° ğŸ®
ì²­ì†Œë…„ê¸°ì˜ ì„ íƒì´ ì •ì‹ ê±´ê°•, ìœ¡ì²´ê±´ê°•, ìœ„í—˜í–‰ë™ ë“±ì— ì–´ë–¤ ì˜í–¥ì„ ë¯¸ì¹˜ëŠ”ì§€ ì²´í—˜í•˜ëŠ” ì¸í„°ë™í‹°ë¸Œ ì›¹ì•±ì…ë‹ˆë‹¤.  
í˜„ì‹¤ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ì œì‘ë˜ì—ˆìŠµë‹ˆë‹¤.


import streamlit as st
import pandas as pd
import random
import plotly.express as px

st.set_page_config(page_title="LifeStats ì‹œë®¬ë ˆì´í„°", layout="centered")

# ------------------------------
# ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸°
# ------------------------------
@st.cache_data
def load_data():
    data = {}
    files = {
        "í¡ì—°ìœ¨": "data/í˜„ì¬_í¡ì—°ìœ¨_ì¼ë°˜ë‹´ë°°_ê´€ë ¨__í˜„ì¬ì‚¬ìš©ë¥ __20251102155742.csv",
        "ìš°ìš¸ì¦": "data/ì²­ì†Œë…„_ìš°ìš¸ì¦.csv",
        "ìì‚´ì‹œë„ìœ¨": "data/ì²­ì†Œë…„_ìì‚´ì‹œë„ìœ¨.csv",
        "ì‚¬íšŒë¬¸ì œë…¸ì¶œ": "data/ì‚¬íšŒë¬¸ì œ_ìœ„í—˜_ë…¸ì¶œ_ì •ë„_20251102160905.csv"
    }
    for name, path in files.items():
        try:
            df = pd.read_csv(path)
            data[name] = df
        except Exception as e:
            st.warning(f"{name} ë°ì´í„° ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨: {e}")
    return data

data = load_data()

# ------------------------------
# ê¸°ë³¸ ì„¤ì •
# ------------------------------
st.title("ğŸŒ± LifeStats: ì²­ì†Œë…„ê¸° ìƒëª…ì¡´ì¤‘ ì‹œë®¬ë ˆì´í„°")
st.write("ì²­ì†Œë…„ê¸°ì˜ ì„ íƒì´ ì‚¶ì˜ ë°©í–¥ì— ì–´ë–¤ ì˜í–¥ì„ ë¯¸ì¹ ê¹Œ? í˜„ì‹¤ ë°ì´í„°ë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ì‹œë®¬ë ˆì´ì…˜ì„ ì²´í—˜í•´ë³´ì„¸ìš”.")

if "started" not in st.session_state:
    st.session_state.started = False
    st.session_state.stats = {"ì •ì‹ ê±´ê°•": 50, "ìœ¡ì²´ê±´ê°•": 50, "ìœ„í—˜í–‰ë™": 0}

# ------------------------------
# ì‹œì‘ ë‹¨ê³„
# ------------------------------
if not st.session_state.started:
    st.subheader("1ï¸âƒ£ ë¨¼ì € ì„±ë³„ì„ ì„ íƒí•˜ì„¸ìš”")
    gender = st.radio("ì„±ë³„ ì„ íƒ", ["ë‚¨í•™ìƒ", "ì—¬í•™ìƒ", "ë¹„ê³µê°œ"])

    if st.button("ê²Œì„ ì‹œì‘ ğŸš€"):
        st.session_state.gender = gender
        st.session_state.started = True
        st.rerun()

else:
    st.subheader("ğŸ® ì²­ì†Œë…„ê¸° ì‹œë®¬ë ˆì´ì…˜ ì§„í–‰ ì¤‘...")

    # ìƒí™© ë¦¬ìŠ¤íŠ¸
    scenarios = [
        {
            "question": "ìš”ì¦˜ ìŠ¤íŠ¸ë ˆìŠ¤ê°€ ì‹¬í•  ë•Œ, ë‹¹ì‹ ì€?",
            "choices": {
                "ìš´ë™í•˜ë©° í’€ê¸°": {"ì •ì‹ ê±´ê°•": +5, "ìœ¡ì²´ê±´ê°•": +3},
                "í˜¼ì ìŠ¤ë§ˆíŠ¸í° í•˜ê¸°": {"ì •ì‹ ê±´ê°•": -5, "ìœ„í—˜í–‰ë™": +3},
                "ì¹œêµ¬ì—ê²Œ í„¸ì–´ë†“ê¸°": {"ì •ì‹ ê±´ê°•": +7}
            }
        },
        {
            "question": "ì¹œêµ¬ê°€ ìˆ  ë§ˆì‹œìê³  ì œì•ˆí–ˆë‹¤ë©´?",
            "choices": {
                "ë‹¨í˜¸í•˜ê²Œ ê±°ì ˆ": {"ìœ„í—˜í–‰ë™": -5},
                "ì¡°ê¸ˆë§Œ ë§ˆì‹ ë‹¤": {"ì •ì‹ ê±´ê°•": -2, "ìœ„í—˜í–‰ë™": +5},
                "ê°™ì´ ë†€ìê³  í•œë‹¤": {"ìœ„í—˜í–‰ë™": +8, "ì •ì‹ ê±´ê°•": -3}
            }
        },
        {
            "question": "ë°¤ 12ì‹œê°€ ë„˜ì—ˆëŠ”ë° ìˆ™ì œê°€ ì•ˆ ëë‚¬ì„ ë•Œ, ë‹¹ì‹ ì€?",
            "choices": {
                "ì¼ë‹¨ ìê³  ì•„ì¹¨ì— í•œë‹¤": {"ìœ¡ì²´ê±´ê°•": +5},
                "ë°¤ìƒˆ ëë‚¸ë‹¤": {"ìœ¡ì²´ê±´ê°•": -7, "ì •ì‹ ê±´ê°•": -3},
                "ì¹œêµ¬ì—ê²Œ ë² ê»´ë‹¬ë¼ ë¶€íƒ": {"ìœ„í—˜í–‰ë™": +4, "ì •ì‹ ê±´ê°•": -4}
            }
        },
        {
            "question": "SNSì—ì„œ ì•…í”Œì„ ë´¤ì„ ë•Œ ë‹¹ì‹ ì˜ ë°˜ì‘ì€?",
            "choices": {
                "ë¬´ì‹œí•œë‹¤": {"ì •ì‹ ê±´ê°•": -1},
                "ê°™ì´ ëŒ“ê¸€ ë‹¨ë‹¤": {"ìœ„í—˜í–‰ë™": +5, "ì •ì‹ ê±´ê°•": -4},
                "ì‹ ê³ í•˜ê³  ì°¨ë‹¨": {"ì •ì‹ ê±´ê°•": +3}
            }
        },
        {
            "question": "ì‹œí—˜ ì„±ì ì´ ê¸°ëŒ€ ì´í•˜ì¼ ë•Œ, ë‹¹ì‹ ì€?",
            "choices": {
                "ë¶€ëª¨ë‹˜ê³¼ ì´ì•¼ê¸°í•œë‹¤": {"ì •ì‹ ê±´ê°•": +5},
                "ìì±…í•˜ë©° ìš¸ê¸°": {"ì •ì‹ ê±´ê°•": -7},
                "ë‹¤ìŒ ì‹œí—˜ì„ ì¤€ë¹„í•œë‹¤": {"ì •ì‹ ê±´ê°•": +3, "ìœ¡ì²´ê±´ê°•": -2}
            }
        }
    ]

    # ------------------------------
    # ì§„í–‰
    # ------------------------------
    for i, s in enumerate(scenarios):
        st.markdown(f"### {i+1}. {s['question']}")
        choice = st.radio("ì„ íƒí•˜ì„¸ìš”", list(s["choices"].keys()), key=f"q{i}")
        if st.button(f"í™•ì •_{i}", key=f"b{i}"):
            for stat, val in s["choices"][choice].items():
                st.session_state.stats[stat] = max(0, min(100, st.session_state.stats.get(stat, 50) + val))
            st.success(f"ì„ íƒ ë°˜ì˜ë¨! í˜„ì¬ ìŠ¤íƒ¯: {st.session_state.stats}")
            st.rerun()

    # ------------------------------
    # ê²°ê³¼
    # ------------------------------
    st.header("ğŸ“Š ìµœì¢… ê²°ê³¼")

    df_stats = pd.DataFrame(list(st.session_state.stats.items()), columns=["í•­ëª©", "ìˆ˜ì¹˜"])
    fig = px.bar(df_stats, x="í•­ëª©", y="ìˆ˜ì¹˜", color="í•­ëª©", title="ë‹¹ì‹ ì˜ ì²­ì†Œë…„ê¸° ìŠ¤íƒ¯ ê²°ê³¼")
    st.plotly_chart(fig)

    mental = st.session_state.stats["ì •ì‹ ê±´ê°•"]
    risk = st.session_state.stats["ìœ„í—˜í–‰ë™"]

    if mental < 30 or risk > 70:
        st.error("ğŸ˜” ê²°ê³¼: ìš°ìš¸/ìœ„í—˜ ìƒíƒœì…ë‹ˆë‹¤. ì£¼ë³€ì˜ ë„ì›€ì„ ë°›ëŠ” ê²Œ ì¢‹ì•„ìš”.")
    elif mental > 70 and risk < 30:
        st.success("ğŸŒˆ ê²°ê³¼: ê±´ê°•í•˜ê³  í–‰ë³µí•œ ì²­ì†Œë…„ê¸°! ìƒëª… ì¡´ì¤‘ì˜ ê°€ì¹˜ê°€ ì˜ ì§€ì¼œì¡Œì–´ìš”.")
    else:
        st.info("ğŸ™‚ ê²°ê³¼: ë³´í†µ ìˆ˜ì¤€ì´ì—ìš”. ì‘ì€ ìŠµê´€ í•˜ë‚˜ë¡œ ë” ê±´ê°•í•´ì§ˆ ìˆ˜ ìˆì–´ìš”.")

    # ------------------------------
    # í†µê³„ í‘œì‹œ
    # ------------------------------
    st.markdown("---")
    st.subheader("ğŸ“ˆ í˜„ì‹¤ ë°ì´í„° ë¹„êµ (ìš”ì•½)")

    for key, df in data.items():
        st.markdown(f"#### ğŸ”¹ {key} ë°ì´í„° ì¼ë¶€ ë¯¸ë¦¬ë³´ê¸°")
        st.dataframe(df.head())

